---
packer_working_dir: "{{ lookup('env', 'PWD') }}/tmp/packer"
packer_iso_url: https://releases.ubuntu.com/22.04.2/ubuntu-22.04.2-live-server-amd64.iso
packer_iso_file: "{{ packer_iso_url | basename }}"
packer_template_name: "{{ packer_iso | replace('.iso', '') }}"
packer_default_user: packer
packer_default_user_password: changeme
packer_default_ssh_key: "{{ lookup('env', 'HOME') }}/.ssh/home"
packer_user_data_content: "{{ lookup('template', 'packer_user_data.j2') }}"
packer_template_content: "{{ lookup('template', 'packer_proxmox.pkr.hcl.j2') }}"
packer_config_files:
  - path: "{{ packer_working_dir }}/packer.pkr.hcl"
    content: "{{ packer_template_content }}"
  - path: "{{ packer_working_dir }}/files/99-pve.cfg" # For proxmox
    content: "datasource_list: [ConfigDrive, NoCloud]"
  - path: "{{ packer_working_dir }}/http/meta-data"
    content: ""
  - path: "{{ packer_working_dir }}/http/user-data"
    content: "{{ packer_user_data_content }}"

################################### PACKER PROXMOX ####################################
#
packer_proxmox_api_url: ~
packer_proxmox_api_user: ~
packer_proxmox_api_password: ~
packer_proxmox_node_name: ~
packer_proxmox_build_name: ubuntu-22-10
packer_proxmox_template_name: "{{ packer_proxmox_build_name }}-template-v1"
packer_proxmox_iso_storage_pool: ~
packer_proxmox_iso_file: local:iso/ubuntu-22.10-live-server-amd64.iso
packer_proxmox_vm_storage_pool: ~
packer_proxmox_vm_storage_pool_type: lvm
packer_proxmox_vm_disk_type: virtio

################################### PACKER QEMU ####################################
#

...